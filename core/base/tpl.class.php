<?php	class Tpl extends Smarty{		public function display($file=""){			$url = $_SERVER['SCRIPT_NAME']."/".$_GET['m'];			$this->assign("url",$url);//index.php/user						$app = $_SERVER['SCRIPT_NAME'];			$this->assign('app',$app);// mvc/index.php						$res = dirname($app)."/".APP."/resource";			$this->assign('res',$res);						$resource = dirname($app)."/resource";			$this->assign('resource',$resource);						$root = dirname($app);			$this->assign('root',$root);						//判断$file是否为空			if(empty($file)){				$dir = empty($_GET['m'])?"index":strtolower($_GET['m']);				$f = empty($_GET['a'])?"index":strtolower($_GET['a']);				$file = $dir."/".$f.".".SUBFIX;				parent::display($file);			}elseif($file=="info.html"){				parent::display($file);			}else{				//判断是否传递了目录				if(strpos($file,"/")===false){					$dir = empty($_GET['m'])?"index":strtolower($_GET['m']);					parent::display($dir."/".$file);				}else{					parent::display($file);				}							}		}				//成功提示		public function success($info,$sec,$url){			$this->assign("ico","√");			$this->assign("class","success");			$this->assign('info',$info);			$this->assign('sec',$sec);			$this->assign('redirect',$url);			$this->display("info.html");		}				//错误提示		public function error($info,$sec,$url){			$this->assign("ico","X");			$this->assign("class","error");			$this->assign('info',$info);			$this->assign('sec',$sec);			$this->assign('redirect',$url);			$this->display("info.html");		}				//魔术方法		public function __call($func,$params){			$str = "[<font color='red'>致命错误</font>] : 对不起，您调用的方法".$func."(".join(",",$params).")不存在！";			Debug::setUserError($str);		}									}